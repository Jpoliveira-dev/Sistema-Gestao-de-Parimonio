
generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
enum Role{
  ADMIN
  TECH
  CONSULTA
}
enum AssetsStatus{
  AVAILABLE
  IN_USE
  MAINTENENCE
  LOANED
}
enum EventType{
  MOVE
  STATUS_CHANGE
  CHECKIN
  CHECKOUT
  OTHER
}
enum MaintenanceStatus{
  OPEN
  IN_PROGRESS
  CLOSED
}

model User{
  id Int @id @default(autoincrement())
  nome String
  senha String
  email String @unique
  role Role @default(CONSULTA)
  events AssetsEvent[]                  
  createdAt DateTime @default(now())
  updateAt DateTime @updateAt               
}
model Lab{
  idLab Int @id @default(autoincrement())
  nameLab String @unique
  idLocal String?
  local Location @relation(fields[idLocal], reference:[idLocal])
  createdAt DateTime @default(now())
  updateAt DateTime @updateAt
  assets Assets[]
}
model Assets{
  idAssets Int @id @default(autoincrement())
  idLab Int?
  labFK Lab? @relation(fields:[idLab], reference: [idLab])
  modelo String
  patrimony Int @unique
  category String?
  serial String?
}
model Location{
  idLocal Int @id @default(autoincrement())
  name String
  ParentId Int?
  parent Location? @relation("LocationParent", fields: [parentId], reference:[idLocal])
  children Location? @relation("LocationParent)
  labs Lab[]
  createdAt DateTime @default(now())
  updateAt DateTime @updateAt
}


